# Hydro 项目设计文档

本目录包含了 Hydro 项目的完整设计文档，涵盖了系统架构、各个模块的详细设计以及核心技术实现。

## 文档目录

### 1. [整体架构设计](./architecture.md)
- 项目概述和核心特性
- 系统架构总览
- 核心模块设计
- 数据流设计
- 部署架构
- 安全设计
- 性能优化
- 监控与日志
- 扩展性设计

### 2. [Framework 框架设计](./framework-design.md)
- 框架架构和组件
- 插件系统设计
- 上下文管理
- 事件系统
- 路由系统
- 验证系统
- 序列化系统
- 错误处理
- 装饰器系统
- 服务注册

### 3. [HydroOJ 核心系统设计](./hydrooj-design.md)
- Handler 层设计
- Model 层设计
- Service 层设计
- 业务逻辑层
- 权限系统
- 评测系统接口
- 比赛系统
- 消息系统
- 扩展系统
- 配置管理

### 4. [HydroJudge 评测系统设计](./judge-design.md)
- 系统架构
- 核心组件设计
- 评测引擎设计
- 检查器系统
- 缓存系统
- 主机适配器
- 性能优化
- 错误处理
- 监控和日志

### 5. [UI-Default 前端系统设计](./ui-design.md)
- 技术架构
- 组件系统设计
- 页面系统设计
- 构建系统设计
- 样式系统设计
- 国际化系统
- 状态管理
- 性能优化
- 安全机制

### 6. [插件系统设计](./plugins-design.md)
- 插件架构
- 插件开发规范
- 官方插件分析
- 插件生命周期
- 插件通信机制
- 插件配置界面
- 插件安全机制
- 插件市场
- 插件开发工具

### 7. [数据库设计](./database-design.md)
- 数据库架构
- 核心数据模型
- 辅助数据模型
- 任务和队列模型
- 统计和分析模型
- 数据库优化策略
- 数据备份和恢复
- 数据迁移

## 文档说明

### 文档目的
这些文档旨在为开发者、维护者和贡献者提供 Hydro 系统的全面技术参考，包括：
- 系统整体架构和设计理念
- 各个模块的详细实现方案
- 核心技术和算法说明
- 最佳实践和开发指南

### 阅读建议
1. **新手开发者**：建议先阅读整体架构设计，了解系统全貌
2. **前端开发者**：重点关注 UI-Default 前端系统设计
3. **后端开发者**：重点关注 HydroOJ 核心系统和数据库设计
4. **插件开发者**：重点关注插件系统设计和 Framework 框架设计
5. **运维人员**：重点关注部署架构、性能优化和监控部分

### 文档维护
这些文档会随着系统的发展持续更新，如果您发现文档中的错误或需要补充的内容，欢迎提交 Pull Request 或 Issue。

## 技术栈概览

### 后端技术栈
- **语言**: TypeScript/Node.js
- **框架**: Cordis (插件框架)
- **数据库**: MongoDB
- **评测环境**: Docker/Sandbox
- **消息队列**: MongoDB 集合

### 前端技术栈
- **语言**: TypeScript
- **框架**: React
- **样式**: Stylus
- **构建工具**: Webpack
- **编辑器**: Monaco Editor

### 基础设施
- **容器化**: Docker
- **反向代理**: Caddy/Nginx
- **监控**: Prometheus + Grafana
- **日志**: 结构化日志
- **备份**: MongoDB Dump + 增量备份

## 核心特性

### 🔧 模块化设计
- 基于 Cordis 框架的插件系统
- 支持热插拔的功能模块
- 标准化的插件接口和生命周期管理

### 🏢 多租户支持
- 单系统多空间架构
- 细粒度的权限控制
- 独立的域管理和配置

### ⚡ 高性能评测
- 分布式评测集群
- 多种题目类型支持
- 智能缓存和负载均衡

### 🎨 现代化界面
- 响应式设计
- 主题切换支持
- 国际化支持
- 丰富的交互组件

### 🔒 安全可靠
- 沙箱隔离评测环境
- 完善的权限系统
- XSS/CSRF 防护
- 数据备份和恢复机制

## 系统要求

### 最低配置
- **CPU**: 2 核心
- **内存**: 4GB RAM
- **存储**: 20GB 可用空间
- **系统**: Linux (Ubuntu 20.04+ / Debian 11+ / CentOS 8+)

### 推荐配置
- **CPU**: 4+ 核心
- **内存**: 8GB+ RAM
- **存储**: 100GB+ SSD
- **网络**: 100Mbps+ 带宽

### 集群部署
- **负载均衡器**: Nginx/Caddy
- **应用服务器**: 2+ 节点
- **数据库**: MongoDB 副本集
- **评测节点**: 独立部署，可弹性扩展

## 相关链接

- [项目主页](https://hydro.js.org/)
- [在线演示](https://hydro.ac/)
- [GitHub 仓库](https://github.com/hydro-dev/Hydro)
- [用户文档](https://docs.hydro.ac/)
- [开发指南](https://docs.hydro.ac/docs/Hydro/dev/)
- [插件开发](https://docs.hydro.ac/docs/Hydro/plugins/)

## 许可证

本项目采用 AGPL-3.0 许可证，详情请参阅 [LICENSE](../LICENSE) 文件。

---

*最后更新: 2024年6月*